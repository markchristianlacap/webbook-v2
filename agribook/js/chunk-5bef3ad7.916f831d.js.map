{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VDialog/VDialog.js","webpack:///./node_modules/vuetify/lib/components/VForm/VForm.js","webpack:///./node_modules/@firebase/storage/dist/index.esm.js","webpack:///./node_modules/vuetify/lib/components/VTextarea/VTextarea.js","webpack:///./node_modules/core-js/modules/es.array.last-index-of.js","webpack:///./node_modules/core-js/internals/array-last-index-of.js","webpack:///./node_modules/vuetify/lib/components/VOverlay/VOverlay.js","webpack:///./node_modules/vuetify/lib/components/VOverlay/index.js","webpack:///./node_modules/vuetify/lib/mixins/overlayable/index.js"],"names":["baseMixins","mixins","Activatable","Dependent","Detachable","Overlayable","Returnable","Stackable","Toggleable","extend","name","directives","ClickOutside","props","dark","Boolean","disabled","fullscreen","light","maxWidth","type","String","Number","default","noClickAnimation","origin","persistent","retainFocus","scrollable","transition","width","data","activatedBy","animate","animateTimeout","isActive","this","value","stackMinZIndex","computed","classes","contentClass","trim","contentClasses","hasActivator","$slots","activator","$scopedSlots","watch","val","show","hideScroll","removeOverlay","unbind","showScroll","genOverlay","created","$attrs","hasOwnProperty","removed","beforeMount","$nextTick","isBooted","beforeDestroy","window","methods","animateClick","clearTimeout","setTimeout","closeConditional","e","target","_isDestroyed","$refs","content","contains","overlay","$el","document","documentElement","classList","add","options","call","hideOverlay","focus","bind","addEventListener","onFocusin","removeEventListener","onClickOutside","$emit","activeZIndex","getMaxZIndex","onKeydown","keyCode","keyCodes","esc","getOpenDependents","length","getActivator","includes","getOpenDependentElements","some","el","focusable","querySelectorAll","render","h","children","class","ref","args","include","on","click","stopPropagation","style","undefined","convertToUnit","push","genActivator","dialog","showLazyContent","getContentSlot","attrs","role","tabindex","getScopeIdAttrs","keydown","zIndex","$createElement","ThemeProvider","root","staticClass","attach","BindsAttrs","RegistrableProvide","inheritAttrs","lazyValidation","inputs","watchers","errorBag","handler","errors","Object","values","deep","immediate","watchInput","input","watcher","$watch","$set","_uid","valid","shouldValidate","validate","filter","reset","forEach","resetErrorBag","resetValidation","register","unregister","found","find","i","unwatch","$delete","novalidate","attrs$","submit","DEFAULT_HOST","CONFIG_STORAGE_BUCKET_KEY","DEFAULT_MAX_OPERATION_RETRY_TIME","DEFAULT_MAX_UPLOAD_RETRY_TIME","MIN_SAFE_INTEGER","FirebaseStorageError","code","message","code_","prependCode","message_","serverResponse_","name_","prototype","codeProp","codeEquals","serverResponseProp","setServerResponseProp","serverResponse","defineProperty","get","enumerable","configurable","Code","UNKNOWN","OBJECT_NOT_FOUND","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","QUOTA_EXCEEDED","UNAUTHENTICATED","UNAUTHORIZED","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","CANCELED","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","CANNOT_SLICE_BLOB","SERVER_FILE_WRONG_SIZE","NO_DOWNLOAD_URL","INVALID_ARGUMENT","INVALID_ARGUMENT_COUNT","APP_DELETED","INVALID_ROOT_OPERATION","INVALID_FORMAT","INTERNAL_ERROR","unknown","objectNotFound","path","quotaExceeded","bucket","unauthenticated","unauthorized","retryLimitExceeded","invalidUrl","url","invalidDefaultBucket","noDefaultBucket","cannotSliceBlob","serverFileWrongSize","noDownloadURL","invalidArgument","index","fnName","invalidArgumentCount","argMin","argMax","real","countPart","plural","appDeleted","invalidRootOperation","invalidFormat","format","internalError","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","formatValidator","stringFormat","StringData","contentType","dataFromString","stringData","utf8Bytes_","base64Bytes_","dataURLBytes_","dataURLContentType_","b","c","charCodeAt","hi","lo","Uint8Array","percentEncodedBytes_","decoded","decodeURIComponent","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","replace","bytes","atob","array","DataURLParts","dataURL","base64","matches","match","middle","endsWith","substring","rest","dataUrl","parts","s","end","longEnough","ErrorCode","TaskEvent","STATE_CHANGED","InternalTaskState","RUNNING","PAUSING","PAUSED","SUCCESS","CANCELING","ERROR","TaskState","taskStateFromInternalTaskState","state","isDef","p","isJustDef","isFunction","isObject","isNonNullObject","isNonArrayObject","Array","isArray","isString","isInteger","isNumber","isNativeBlob","isNativeBlobDefined","Blob","NetworkXhrIo","_this","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","Promise","resolve","ABORT","NETWORK_ERROR","send","method","body","headers","open","key","setRequestHeader","toString","getErrorCode","getStatus","status","getResponseText","responseText","abort","getResponseHeader","header","addUploadProgressListener","listener","upload","removeUploadProgressListener","XhrIoPool","createXhrIo","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","getBlob","_i","arguments","bb","append","Error","sliceBlob","blob","start","webkitSlice","mozSlice","slice","FbsBlob","elideCopy","size","blobType","data_","ArrayBuffer","byteLength","set","size_","type_","startByte","endByte","realBlob","sliced","buffer","blobby","map","apply","uint8Arrays","finalLength_1","merged_1","index_1","uploadData","Location","path_","fullServerUrl","encode","encodeURIComponent","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","location","bucketDomain","gsModify","loc","charAt","gsPath","gsRegex","RegExp","gsIndices","httpModify","version","hostRegex","httpRegex","httpIndices","groups","regex","indices","postModify","group","captures","exec","bucketValue","pathValue","jsonObjectOrNull","obj","JSON","parse","lastIndexOf","newPath","child","childPath","canonicalChildPath","split","component","join","lastComponent","makeUrl","urlPart","makeQueryString","params","queryPart","nextPart","noXform_","metadata","Mapping","server","local","writable","xform","mappings_","xformPath","fullPath","getMappings","mappings","mappingsXformPath","_metadata","nameMapping","xformSize","sizeMapping","addRef","authWrapper","generateRef","makeStorageReference","fromResource","resource","len","mapping","fromResourceString","resourceString","downloadUrlFromResourceString","tokens","tokensList","urls","token","base","queryString","alt","toResourceString","stringify","metadataValidator","MAX_RESULTS_KEY","MAX_MAX_RESULTS","PAGE_TOKEN_KEY","PREFIXES_KEY","ITEMS_KEY","fromBackendResponse","listResult","prefixes","items","nextPageToken","_a","pathWithoutTrailingSlash","reference","_b","_c","item","fromResponseString","listOptionsValidator","RequestInfo","timeout","urlParams","errorHandler","progressCallback","successCodes","additionalRetryCodes","handlerCheck","cndn","metadataHandler","xhr","text","listHandler","downloadUrlHandler","sharedErrorHandler","err","newErr","objectErrorHandler","shared","getMetadata","maxOperationRetryTime","requestInfo","list","delimiter","pageToken","maxResults","isRoot","getDownloadUrl","updateMetadata","deleteObject","_xhr","_text","determineContentType_","metadataForUpload_","metadataClone","assign","multipartUpload","genBoundary","str","Math","random","boundary","metadata_","metadataString","preBlobPart","postBlobPart","maxUploadRetryTime","ResumableUploadStatus","current","total","finalized","checkResumeHeader_","allowed","allowedStatus","createResumableUpload","metadataForUpload","getResumableUploadStatus","sizeString","isNaN","resumableUploadChunkSize","continueResumableUpload","chunkSize","status_","bytesLeft","bytesToUpload","min","uploadCommand","uploadStatus","newCurrent","Observer","nextOrObserver","error","complete","asFunctions","next","observer","UploadTaskSnapshot","bytesTransferred","totalBytes","task","specs","passed","minArgs","maxArgs","optional","validLength","validator","ArgSpec","self","and_","v1","v2","stringSpec","stringValidator","chainedValidator","uploadDataSpec","metadataSpec","listOptionSpec","nonNegativeNumberSpec","looseObjectSpec","isLooseObjectValidator","isLooseObject","nullFunctionSpec","f","argsToForward","then","UploadTask","transferred_","needToFetchStatus_","needToFetchMetadata_","observers_","error_","uploadUrl_","request_","chunkMultiplier_","resolve_","reject_","ref_","authWrapper_","location_","blob_","resumable_","shouldDoResumable_","state_","errorHandler_","completeTransitions_","transition_","metadataErrorHandler_","promise_","reject","start_","makeProgressCallback_","sizeBefore","loaded","updateProgress_","createResumable_","fetchStatus_","fetchMetadata_","continueUpload_","oneShotUpload_","resolveToken_","callback","getAuthToken","authToken","createRequest","makeRequest","getPromise","statusRequest","uploadRequest","newStatus","increaseMultiplier_","currentSize","metadataRequest","multipartRequest","transferred","old","notifyObservers_","cancel","wasPaused","externalState","completed","typeValidator","nextOrObserverMessage","nextValidator","observerValidator","nextOrObserverValidator","anyDefined","makeBinder","binder","addObserver_","removeObserver_","binderNextOrObserverValidator","binderSpecs","typeOnly","onFulfilled","onRejected","catch","notifyObserver_","splice","finishPromise_","observers","triggered","snapshot","toCall","resume","pause","Reference","newRef","service","put","throwIfRoot_","putString","delete","listAll","accumulator","listAllHelper","opt","nextPage","label","sent","op","getDownloadURL","FailRequest","_appDelete","RequestMap","Map","id","addRequest","request","clear","v","AuthWrapper","app","maker","requestMaker","pool","bucket_","deleted_","app_","extractBucket_","storageRefMaker_","requestMaker_","pool_","service_","maxOperationRetryTime_","maxUploadRetryTime_","requestMap_","config","INTERNAL","getToken","response","accessToken","deleteApp","setMaxUploadRetryTime","time","setMaxOperationRetryTime","waitSeconds","timeoutId","hitTimeout","cancelState","canceled","triggeredCallback","triggerCallback","callWithDelay","millis","success","waitMillis","mustStop","stopped","stop","wasTimeout","NetworkRequest","errorCallback","pendingXhr_","backoffId_","canceled_","appDelete_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","doTheRequest","backoffCallback","RequestEndStatus","progressListener","hitServer","isRetryStatusCode_","successCode","wasCanceled","progressEvent","lengthComputable","backoffDone","requestWentThrough","wasSuccessCode","result","appDelete","isFiveHundredCode","extraRetryCodes","isExtraRetryCode","isRequestSpecificRetryCode","addAuthHeader_","addVersionHeader_","SDK_VERSION","Service","authWrapperBucket","internals_","ServiceInternals","test","refFromURL","STORAGE_TYPE","factory","unused","registerStorage","instance","namespaceExports","Storage","registerService","VTextField","autoGrow","noResize","rowHeight","parseFloat","rows","parseInt","noResizeHandle","lazyValue","calculateInputHeight","mounted","height","scrollHeight","minHeight","max","genInput","tag","onInput","onKeyDown","isFocused","$","proto","forced","toIndexedObject","toInteger","toLength","sloppyArrayMethod","nativeLastIndexOf","NEGATIVE_ZERO","SLOPPY_METHOD","module","exports","searchElement","O","Colorable","Themeable","absolute","color","opacity","__scrim","setBackgroundColor","computedOpacity","themeClasses","styles","genContent","VOverlay","Vue","overlayColor","overlayOpacity","createOverlay","propsData","$mount","parent","parentNode","querySelector","insertBefore","firstChild","requestAnimationFrame","getZIndex","addOnceEventListener","removeChild","$destroy","scrollListener","tagName","isContentEditable","up","pageup","down","pagedown","deltaY","checkPath","preventDefault","hasScrollbar","nodeType","Node","ELEMENT_NODE","getComputedStyle","overflowY","clientHeight","shouldScroll","delta","scrollTop","isInside","composedPath","selected","getSelection","anchorNode","parentElement","$vuetify","breakpoint","smAndDown","addPassiveEventListener","passive","remove"],"mappings":"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","file":"js/chunk-5bef3ad7.916f831d.js","sourcesContent":["import \"../../../src/components/VDialog/VDialog.sass\"; // Mixins\n\nimport Activatable from '../../mixins/activatable';\nimport Dependent from '../../mixins/dependent';\nimport Detachable from '../../mixins/detachable';\nimport Overlayable from '../../mixins/overlayable';\nimport Returnable from '../../mixins/returnable';\nimport Stackable from '../../mixins/stackable';\nimport Toggleable from '../../mixins/toggleable'; // Directives\n\nimport ClickOutside from '../../directives/click-outside'; // Helpers\n\nimport { convertToUnit, keyCodes } from '../../util/helpers';\nimport ThemeProvider from '../../util/ThemeProvider';\nimport mixins from '../../util/mixins';\nimport { removed } from '../../util/console';\nconst baseMixins = mixins(Activatable, Dependent, Detachable, Overlayable, Returnable, Stackable, Toggleable);\n/* @vue/component */\n\nexport default baseMixins.extend({\n  name: 'v-dialog',\n  directives: {\n    ClickOutside\n  },\n  props: {\n    dark: Boolean,\n    disabled: Boolean,\n    fullscreen: Boolean,\n    light: Boolean,\n    maxWidth: {\n      type: [String, Number],\n      default: 'none'\n    },\n    noClickAnimation: Boolean,\n    origin: {\n      type: String,\n      default: 'center center'\n    },\n    persistent: Boolean,\n    retainFocus: {\n      type: Boolean,\n      default: true\n    },\n    scrollable: Boolean,\n    transition: {\n      type: [String, Boolean],\n      default: 'dialog-transition'\n    },\n    width: {\n      type: [String, Number],\n      default: 'auto'\n    }\n  },\n\n  data() {\n    return {\n      activatedBy: null,\n      animate: false,\n      animateTimeout: -1,\n      isActive: !!this.value,\n      stackMinZIndex: 200\n    };\n  },\n\n  computed: {\n    classes() {\n      return {\n        [`v-dialog ${this.contentClass}`.trim()]: true,\n        'v-dialog--active': this.isActive,\n        'v-dialog--persistent': this.persistent,\n        'v-dialog--fullscreen': this.fullscreen,\n        'v-dialog--scrollable': this.scrollable,\n        'v-dialog--animated': this.animate\n      };\n    },\n\n    contentClasses() {\n      return {\n        'v-dialog__content': true,\n        'v-dialog__content--active': this.isActive\n      };\n    },\n\n    hasActivator() {\n      return Boolean(!!this.$slots.activator || !!this.$scopedSlots.activator);\n    }\n\n  },\n  watch: {\n    isActive(val) {\n      if (val) {\n        this.show();\n        this.hideScroll();\n      } else {\n        this.removeOverlay();\n        this.unbind();\n      }\n    },\n\n    fullscreen(val) {\n      if (!this.isActive) return;\n\n      if (val) {\n        this.hideScroll();\n        this.removeOverlay(false);\n      } else {\n        this.showScroll();\n        this.genOverlay();\n      }\n    }\n\n  },\n\n  created() {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('full-width')) {\n      removed('full-width', this);\n    }\n  },\n\n  beforeMount() {\n    this.$nextTick(() => {\n      this.isBooted = this.isActive;\n      this.isActive && this.show();\n    });\n  },\n\n  beforeDestroy() {\n    if (typeof window !== 'undefined') this.unbind();\n  },\n\n  methods: {\n    animateClick() {\n      this.animate = false; // Needed for when clicking very fast\n      // outside of the dialog\n\n      this.$nextTick(() => {\n        this.animate = true;\n        window.clearTimeout(this.animateTimeout);\n        this.animateTimeout = window.setTimeout(() => this.animate = false, 150);\n      });\n    },\n\n    closeConditional(e) {\n      const target = e.target; // Ignore the click if the dialog is closed or destroyed,\n      // if it was on an element inside the content, or\n      // if it was dragged onto the overlay (#6969)\n\n      return !(this._isDestroyed || !this.isActive || this.$refs.content.contains(target) || this.overlay && target && !this.overlay.$el.contains(target));\n    },\n\n    hideScroll() {\n      if (this.fullscreen) {\n        document.documentElement.classList.add('overflow-y-hidden');\n      } else {\n        Overlayable.options.methods.hideScroll.call(this);\n      }\n    },\n\n    show() {\n      !this.fullscreen && !this.hideOverlay && this.genOverlay();\n      this.$nextTick(() => {\n        this.$refs.content.focus();\n        this.bind();\n      });\n    },\n\n    bind() {\n      window.addEventListener('focusin', this.onFocusin);\n    },\n\n    unbind() {\n      window.removeEventListener('focusin', this.onFocusin);\n    },\n\n    onClickOutside(e) {\n      this.$emit('click:outside', e);\n\n      if (this.persistent) {\n        this.noClickAnimation || this.animateClick();\n      } else if (this.activeZIndex >= this.getMaxZIndex()) {\n        this.isActive = false;\n      }\n    },\n\n    onKeydown(e) {\n      if (e.keyCode === keyCodes.esc && !this.getOpenDependents().length) {\n        if (!this.persistent) {\n          this.isActive = false;\n          const activator = this.getActivator();\n          this.$nextTick(() => activator && activator.focus());\n        } else if (!this.noClickAnimation) {\n          this.animateClick();\n        }\n      }\n\n      this.$emit('keydown', e);\n    },\n\n    // On focus change, wrap focus to stay inside the dialog\n    // https://github.com/vuetifyjs/vuetify/issues/6892\n    onFocusin(e) {\n      if (!e || !this.retainFocus) return;\n      const target = e.target;\n\n      if (!!target && // It isn't the document or the dialog body\n      ![document, this.$refs.content].includes(target) && // It isn't inside the dialog body\n      !this.$refs.content.contains(target) && // We're the topmost dialog\n      this.activeZIndex >= this.getMaxZIndex() && // It isn't inside a dependent element (like a menu)\n      !this.getOpenDependentElements().some(el => el.contains(target)) // So we must have focused something outside the dialog and its children\n      ) {\n          // Find and focus the first available element inside the dialog\n          const focusable = this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n          focusable.length && focusable[0].focus();\n        }\n    }\n\n  },\n\n  render(h) {\n    const children = [];\n    const data = {\n      class: this.classes,\n      ref: 'dialog',\n      directives: [{\n        name: 'click-outside',\n        value: this.onClickOutside,\n        args: {\n          closeConditional: this.closeConditional,\n          include: this.getOpenDependentElements\n        }\n      }, {\n        name: 'show',\n        value: this.isActive\n      }],\n      on: {\n        click: e => {\n          e.stopPropagation();\n        }\n      },\n      style: {}\n    };\n\n    if (!this.fullscreen) {\n      data.style = {\n        maxWidth: this.maxWidth === 'none' ? undefined : convertToUnit(this.maxWidth),\n        width: this.width === 'auto' ? undefined : convertToUnit(this.width)\n      };\n    }\n\n    children.push(this.genActivator());\n    let dialog = h('div', data, this.showLazyContent(this.getContentSlot()));\n\n    if (this.transition) {\n      dialog = h('transition', {\n        props: {\n          name: this.transition,\n          origin: this.origin\n        }\n      }, [dialog]);\n    }\n\n    children.push(h('div', {\n      class: this.contentClasses,\n      attrs: {\n        role: 'document',\n        tabindex: this.isActive ? 0 : undefined,\n        ...this.getScopeIdAttrs()\n      },\n      on: {\n        keydown: this.onKeydown\n      },\n      style: {\n        zIndex: this.activeZIndex\n      },\n      ref: 'content'\n    }, [this.$createElement(ThemeProvider, {\n      props: {\n        root: true,\n        light: this.light,\n        dark: this.dark\n      }\n    }, [dialog])]));\n    return h('div', {\n      staticClass: 'v-dialog__container',\n      class: {\n        'v-dialog__container--attached': this.attach === '' || this.attach === true || this.attach === 'attach'\n      },\n      attrs: {\n        role: 'dialog'\n      }\n    }, children);\n  }\n\n});\n//# sourceMappingURL=VDialog.js.map","// Mixins\nimport mixins from '../../util/mixins';\nimport BindsAttrs from '../../mixins/binds-attrs';\nimport { provide as RegistrableProvide } from '../../mixins/registrable';\n/* @vue/component */\n\nexport default mixins(BindsAttrs, RegistrableProvide('form')\n/* @vue/component */\n).extend({\n  name: 'v-form',\n  inheritAttrs: false,\n  props: {\n    lazyValidation: Boolean,\n    value: Boolean\n  },\n  data: () => ({\n    inputs: [],\n    watchers: [],\n    errorBag: {}\n  }),\n  watch: {\n    errorBag: {\n      handler(val) {\n        const errors = Object.values(val).includes(true);\n        this.$emit('input', !errors);\n      },\n\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    watchInput(input) {\n      const watcher = input => {\n        return input.$watch('hasError', val => {\n          this.$set(this.errorBag, input._uid, val);\n        }, {\n          immediate: true\n        });\n      };\n\n      const watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {}\n      };\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', val => {\n          if (!val) return; // Only watch if we're not already doing it\n\n          if (this.errorBag.hasOwnProperty(input._uid)) return;\n          watchers.valid = watcher(input);\n        });\n      } else {\n        watchers.valid = watcher(input);\n      }\n\n      return watchers;\n    },\n\n    /** @public */\n    validate() {\n      return this.inputs.filter(input => !input.validate(true)).length === 0;\n    },\n\n    /** @public */\n    reset() {\n      this.inputs.forEach(input => input.reset());\n      this.resetErrorBag();\n    },\n\n    resetErrorBag() {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {};\n        }, 0);\n      }\n    },\n\n    /** @public */\n    resetValidation() {\n      this.inputs.forEach(input => input.resetValidation());\n      this.resetErrorBag();\n    },\n\n    register(input) {\n      this.inputs.push(input);\n      this.watchers.push(this.watchInput(input));\n    },\n\n    unregister(input) {\n      const found = this.inputs.find(i => i._uid === input._uid);\n      if (!found) return;\n      const unwatch = this.watchers.find(i => i._uid === found._uid);\n\n      if (unwatch) {\n        unwatch.valid();\n        unwatch.shouldValidate();\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid);\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid);\n      this.$delete(this.errorBag, found._uid);\n    }\n\n  },\n\n  render(h) {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$\n      },\n      on: {\n        submit: e => this.$emit('submit', e)\n      }\n    }, this.$slots.default);\n  }\n\n});\n//# sourceMappingURL=VForm.js.map","import firebase from '@firebase/app';\nimport { __awaiter, __generator, __spreadArrays } from 'tslib';\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\r\n/**\r\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\r\n * enough for us to use it directly.\r\n */\r\nvar MIN_SAFE_INTEGER = -9007199254740991;\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FirebaseStorageError = /** @class */ (function () {\r\n    function FirebaseStorageError(code, message) {\r\n        this.code_ = prependCode(code);\r\n        this.message_ = 'Firebase Storage: ' + message;\r\n        this.serverResponse_ = null;\r\n        this.name_ = 'FirebaseError';\r\n    }\r\n    FirebaseStorageError.prototype.codeProp = function () {\r\n        return this.code;\r\n    };\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.codeProp();\r\n    };\r\n    FirebaseStorageError.prototype.serverResponseProp = function () {\r\n        return this.serverResponse_;\r\n    };\r\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\r\n        this.serverResponse_ = serverResponse;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\r\n        get: function () {\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\r\n        get: function () {\r\n            return this.code_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            return this.message_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.serverResponse_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}());\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction noDefaultBucket() {\r\n    return new FirebaseStorageError(Code.NO_DEFAULT_BUCKET, 'No default bucket ' +\r\n        \"found. Did you set the '\" +\r\n        CONFIG_STORAGE_BUCKET_KEY +\r\n        \"' property when initializing the app?\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(index, fnName, message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\r\n}\r\nfunction invalidArgumentCount(argMin, argMax, fnName, real) {\r\n    var countPart;\r\n    var plural;\r\n    if (argMin === argMax) {\r\n        countPart = argMin;\r\n        plural = argMin === 1 ? 'argument' : 'arguments';\r\n    }\r\n    else {\r\n        countPart = 'between ' + argMin + ' and ' + argMax;\r\n        plural = 'arguments';\r\n    }\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\r\n        fnName +\r\n        '`: Expected ' +\r\n        countPart +\r\n        ' ' +\r\n        plural +\r\n        ', received ' +\r\n        real +\r\n        '.');\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format The format that was not valid.\r\n * @param message A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nfunction formatValidator(stringFormat) {\r\n    switch (stringFormat) {\r\n        case StringFormat.RAW:\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n        case StringFormat.DATA_URL:\r\n            return;\r\n        default:\r\n            throw 'Expected one of the event types: [' +\r\n                StringFormat.RAW +\r\n                ', ' +\r\n                StringFormat.BASE64 +\r\n                ', ' +\r\n                StringFormat.BASE64URL +\r\n                ', ' +\r\n                StringFormat.DATA_URL +\r\n                '].';\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @return False if the object is undefined or null, true otherwise.\r\n */\r\nfunction isDef(p) {\r\n    return p != null;\r\n}\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isObject(p) {\r\n    return typeof p === 'object';\r\n}\r\nfunction isNonNullObject(p) {\r\n    return isObject(p) && p !== null;\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return isObject(p) && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isInteger(p) {\r\n    return isNumber(p) && Number.isInteger(p);\r\n}\r\nfunction isNumber(p) {\r\n    return typeof p === 'number' || p instanceof Number;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @enum{number}\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (isDef(headers)) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (isDef(body)) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var path = '(/([^?#]*).*)?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var hostRegex = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var httpRegex = new RegExp(\"^https?://\" + hostRegex + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + path, 'i');\r\n        var httpIndices = { bucket: 1, path: 3 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            { regex: httpRegex, indices: httpIndices, postModify: httpModify }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            // @ts-ignore TODO: remove once typescript is upgraded to 3.5.x\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (isDef(size)) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, authWrapper) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return authWrapper.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(authWrapper, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, authWrapper);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(authWrapper, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(authWrapper, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\nfunction metadataValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected Metadata object.';\r\n    }\r\n    for (var key in p) {\r\n        if (p.hasOwnProperty(key)) {\r\n            var val = p[key];\r\n            if (key === 'customMetadata') {\r\n                if (!isObject(val)) {\r\n                    throw 'Expected object for \\'customMetadata\\' mapping.';\r\n                }\r\n            }\r\n            else {\r\n                if (isNonNullObject(val)) {\r\n                    throw \"Mapping for '\" + key + \"' cannot be an object.\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_RESULTS_KEY = 'maxResults';\r\nvar MAX_MAX_RESULTS = 1000;\r\nvar PAGE_TOKEN_KEY = 'pageToken';\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(authWrapper, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    var bucket = authWrapper.bucket();\r\n    if (bucket === null) {\r\n        throw noDefaultBucket();\r\n    }\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(authWrapper, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(authWrapper, resource);\r\n}\r\nfunction listOptionsValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected ListOptions object.';\r\n    }\r\n    for (var key in p) {\r\n        if (key === MAX_RESULTS_KEY) {\r\n            if (!isInteger(p[MAX_RESULTS_KEY]) ||\r\n                p[MAX_RESULTS_KEY] <= 0) {\r\n                throw 'Expected maxResults to be a positive number.';\r\n            }\r\n            if (p[MAX_RESULTS_KEY] > 1000) {\r\n                throw \"Expected maxResults to be less than or equal to \" + MAX_MAX_RESULTS + \".\";\r\n            }\r\n        }\r\n        else if (key === PAGE_TOKEN_KEY) {\r\n            if (p[PAGE_TOKEN_KEY] && !isString(p[PAGE_TOKEN_KEY])) {\r\n                throw 'Expected pageToken to be string.';\r\n            }\r\n        }\r\n        else {\r\n            throw 'Unknown option: ' + key;\r\n        }\r\n    }\r\n}\n\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(authWrapper) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(authWrapper, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(authWrapper, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, listHandler(authWrapper), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(authWrapper, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(authWrapper, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str =\r\n                str +\r\n                    Math.random()\r\n                        .toString()\r\n                        .slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n * @struct\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(authWrapper, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(authWrapper, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) ||\r\n            isDef(error) ||\r\n            isDef(complete);\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error || null;\r\n            this.complete = complete || null;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next || null;\r\n            this.error = observer.error || null;\r\n            this.complete = observer.complete || null;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\n\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param name Name of the function.\r\n * @param specs Argument specs.\r\n * @param passed The actual arguments passed to the function.\r\n * @throws {fbs.Error} If the arguments are invalid.\r\n */\r\nfunction validate(name, specs, passed) {\r\n    var minArgs = specs.length;\r\n    var maxArgs = specs.length;\r\n    for (var i = 0; i < specs.length; i++) {\r\n        if (specs[i].optional) {\r\n            minArgs = i;\r\n            break;\r\n        }\r\n    }\r\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\r\n    if (!validLength) {\r\n        throw invalidArgumentCount(minArgs, maxArgs, name, passed.length);\r\n    }\r\n    for (var i = 0; i < passed.length; i++) {\r\n        try {\r\n            specs[i].validator(passed[i]);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw invalidArgument(i, name, e.message);\r\n            }\r\n            else {\r\n                throw invalidArgument(i, name, e);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar ArgSpec = /** @class */ (function () {\r\n    function ArgSpec(validator, optional) {\r\n        var self = this;\r\n        this.validator = function (p) {\r\n            if (self.optional && !isJustDef(p)) {\r\n                return;\r\n            }\r\n            validator(p);\r\n        };\r\n        this.optional = !!optional;\r\n    }\r\n    return ArgSpec;\r\n}());\r\nfunction and_(v1, v2) {\r\n    return function (p) {\r\n        v1(p);\r\n        v2(p);\r\n    };\r\n}\r\nfunction stringSpec(validator, optional) {\r\n    function stringValidator(p) {\r\n        if (!isString(p)) {\r\n            throw 'Expected string.';\r\n        }\r\n    }\r\n    var chainedValidator;\r\n    if (validator) {\r\n        chainedValidator = and_(stringValidator, validator);\r\n    }\r\n    else {\r\n        chainedValidator = stringValidator;\r\n    }\r\n    return new ArgSpec(chainedValidator, optional);\r\n}\r\nfunction uploadDataSpec() {\r\n    function validator(p) {\r\n        var valid = p instanceof Uint8Array ||\r\n            p instanceof ArrayBuffer ||\r\n            (isNativeBlobDefined() && p instanceof Blob);\r\n        if (!valid) {\r\n            throw 'Expected Blob or File.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction metadataSpec(optional) {\r\n    return new ArgSpec(metadataValidator, optional);\r\n}\r\nfunction listOptionSpec(optional) {\r\n    return new ArgSpec(listOptionsValidator, optional);\r\n}\r\nfunction nonNegativeNumberSpec() {\r\n    function validator(p) {\r\n        var valid = isNumber(p) && p >= 0;\r\n        if (!valid) {\r\n            throw 'Expected a number 0 or greater.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction looseObjectSpec(validator, optional) {\r\n    function isLooseObjectValidator(p) {\r\n        var isLooseObject = p === null || (isDef(p) && p instanceof Object);\r\n        if (!isLooseObject) {\r\n            throw 'Expected an Object.';\r\n        }\r\n        if (validator !== undefined && validator !== null) {\r\n            validator(p);\r\n        }\r\n    }\r\n    return new ArgSpec(isLooseObjectValidator, optional);\r\n}\r\nfunction nullFunctionSpec(optional) {\r\n    function validator(p) {\r\n        var valid = p === null || isFunction(p);\r\n        if (!valid) {\r\n            throw 'Expected a Function.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator, optional);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob The blob to upload.\r\n     */\r\n    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        this.transferred_ = 0;\r\n        this.needToFetchStatus_ = false;\r\n        this.needToFetchMetadata_ = false;\r\n        this.observers_ = [];\r\n        this.error_ = null;\r\n        this.uploadUrl_ = null;\r\n        this.request_ = null;\r\n        this.chunkMultiplier_ = 1;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.ref_ = ref;\r\n        this.authWrapper_ = authWrapper;\r\n        this.location_ = location;\r\n        this.blob_ = blob;\r\n        this.metadata_ = metadata;\r\n        this.mappings_ = mappings;\r\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\r\n        this.state_ = InternalTaskState.RUNNING;\r\n        this.errorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            _this.chunkMultiplier_ = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.needToFetchStatus_ = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.metadataErrorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this.promise_.then(null, function () { });\r\n    }\r\n    UploadTask.prototype.makeProgressCallback_ = function () {\r\n        var _this = this;\r\n        var sizeBefore = this.transferred_;\r\n        return function (loaded) { return _this.updateProgress_(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype.start_ = function () {\r\n        if (this.state_ !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this.request_ !== null) {\r\n            return;\r\n        }\r\n        if (this.resumable_) {\r\n            if (this.uploadUrl_ === null) {\r\n                this.createResumable_();\r\n            }\r\n            else {\r\n                if (this.needToFetchStatus_) {\r\n                    this.fetchStatus_();\r\n                }\r\n                else {\r\n                    if (this.needToFetchMetadata_) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this.fetchMetadata_();\r\n                    }\r\n                    else {\r\n                        this.continueUpload_();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.oneShotUpload_();\r\n        }\r\n    };\r\n    UploadTask.prototype.resolveToken_ = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.authWrapper_.getAuthToken().then(function (authToken) {\r\n            switch (_this.state_) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this.transition_(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this.transition_(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype.createResumable_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this.request_ = null;\r\n                _this.uploadUrl_ = url;\r\n                _this.needToFetchStatus_ = false;\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.fetchStatus_ = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this.authWrapper_, _this.location_, url, _this.blob_);\r\n            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this.request_ = null;\r\n                _this.updateProgress_(status.current);\r\n                _this.needToFetchStatus_ = false;\r\n                if (status.finalized) {\r\n                    _this.needToFetchMetadata_ = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.continueUpload_ = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        var status = new ResumableUploadStatus(this.transferred_, this.blob_.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\r\n            }\r\n            catch (e) {\r\n                _this.error_ = e;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this.increaseMultiplier_();\r\n                _this.request_ = null;\r\n                _this.updateProgress_(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this.metadata_ = newStatus.metadata;\r\n                    _this.transition_(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.increaseMultiplier_ = function () {\r\n        var currentSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this.chunkMultiplier_ *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype.fetchMetadata_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper_, _this.location_, _this.mappings_);\r\n            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.metadataErrorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.oneShotUpload_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = multipartUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.updateProgress_(_this.blob_.size());\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.updateProgress_ = function (transferred) {\r\n        var old = this.transferred_;\r\n        this.transferred_ = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this.transferred_ !== old) {\r\n            this.notifyObservers_();\r\n        }\r\n    };\r\n    UploadTask.prototype.transition_ = function (state) {\r\n        if (this.state_ === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\r\n                this.state_ = state;\r\n                if (wasPaused) {\r\n                    this.notifyObservers_();\r\n                    this.start_();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.error_ = canceled();\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this.state_) {\r\n            case InternalTaskState.PAUSING:\r\n                this.transition_(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this.transition_(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this.start_();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this.state_);\r\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        function typeValidator() {\r\n            if (type !== TaskEvent.STATE_CHANGED) {\r\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\r\n            }\r\n        }\r\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\r\n            '`next`, `error`, `complete` properties.';\r\n        var nextValidator = nullFunctionSpec(true).validator;\r\n        var observerValidator = looseObjectSpec(null, true).validator;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        function nextOrObserverValidator(p) {\r\n            try {\r\n                nextValidator(p);\r\n                return;\r\n            }\r\n            catch (e) { }\r\n            try {\r\n                observerValidator(p);\r\n                var anyDefined = isJustDef(p['next']) ||\r\n                    isJustDef(p['error']) ||\r\n                    isJustDef(p['complete']);\r\n                if (!anyDefined) {\r\n                    throw '';\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n        }\r\n        var specs = [\r\n            stringSpec(typeValidator),\r\n            looseObjectSpec(nextOrObserverValidator, true),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        validate('on', specs, arguments);\r\n        var self = this;\r\n        function makeBinder(specs) {\r\n            function binder(nextOrObserver, error, complete) {\r\n                if (specs !== null) {\r\n                    validate('on', specs, arguments);\r\n                }\r\n                var observer = new Observer(nextOrObserver, error, completed);\r\n                self.addObserver_(observer);\r\n                return function () {\r\n                    self.removeObserver_(observer);\r\n                };\r\n            }\r\n            return binder;\r\n        }\r\n        function binderNextOrObserverValidator(p) {\r\n            if (p === null) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n            nextOrObserverValidator(p);\r\n        }\r\n        var binderSpecs = [\r\n            looseObjectSpec(binderNextOrObserverValidator),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        var typeOnly = !(isJustDef(nextOrObserver) ||\r\n            isJustDef(error) ||\r\n            isJustDef(completed));\r\n        if (typeOnly) {\r\n            return makeBinder(binderSpecs);\r\n        }\r\n        else {\r\n            return makeBinder(null)(nextOrObserver, error, completed);\r\n        }\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this.promise_.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype.addObserver_ = function (observer) {\r\n        this.observers_.push(observer);\r\n        this.notifyObserver_(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype.removeObserver_ = function (observer) {\r\n        var i = this.observers_.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers_.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObservers_ = function () {\r\n        var _this = this;\r\n        this.finishPromise_();\r\n        var observers = this.observers_.slice();\r\n        observers.forEach(function (observer) {\r\n            _this.notifyObserver_(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype.finishPromise_ = function () {\r\n        if (this.resolve_ !== null) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this.state_)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this.resolve_.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this.reject_;\r\n                    async(toCall.bind(null, this.error_))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this.resolve_ = null;\r\n                this.reject_ = null;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObserver_ = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this.state_);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        validate('resume', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.PAUSED ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        validate('pause', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        validate('cancel', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(authWrapper, location) {\r\n        this.authWrapper = authWrapper;\r\n        if (location instanceof Location) {\r\n            this.location = location;\r\n        }\r\n        else {\r\n            this.location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @return The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        validate('toString', [], arguments);\r\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\r\n    };\r\n    Reference.prototype.newRef = function (authWrapper, location) {\r\n        return new Reference(authWrapper, location);\r\n    };\r\n    Reference.prototype.mappings = function () {\r\n        return getMappings();\r\n    };\r\n    /**\r\n     * @return A reference to the object obtained by\r\n     *     appending childPath, removing any duplicate, beginning, or trailing\r\n     *     slashes.\r\n     */\r\n    Reference.prototype.child = function (childPath) {\r\n        validate('child', [stringSpec()], arguments);\r\n        var newPath = child(this.location.path, childPath);\r\n        var location = new Location(this.location.bucket, newPath);\r\n        return this.newRef(this.authWrapper, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        /**\r\n         * @return A reference to the parent of the\r\n         *     current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var newPath = parent(this.location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this.location.bucket, newPath);\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @return An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this.location.bucket, '');\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this.location.bucket;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this.location.path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this.location.path);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this.authWrapper.service();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data The blob to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.put = function (data, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        validate('put', [uploadDataSpec(), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('put');\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data), metadata);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value The string to upload.\r\n     * @param format The format of the string to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        validate('putString', [stringSpec(), stringSpec(formatValidator, true), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('putString');\r\n        var data = dataFromString(format, value);\r\n        var metadataClone = Object.assign({}, metadata);\r\n        if (!isDef(metadataClone['contentType']) &&\r\n            isDef(data.contentType)) {\r\n            metadataClone['contentType'] = data.contentType;\r\n        }\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data.data, true), metadataClone);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @return A promise that resolves if the deletion succeeds.\r\n     */\r\n    Reference.prototype.delete = function () {\r\n        var _this = this;\r\n        validate('delete', [], arguments);\r\n        this.throwIfRoot_('delete');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = deleteObject(_this.authWrapper, _this.location);\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @return A Promise that resolves with all the items and prefixes under\r\n     *      the current storage reference. `prefixes` contains references to\r\n     *      sub-directories and `items` contains references to objects in this\r\n     *      folder. `nextPageToken` is never returned.\r\n     */\r\n    Reference.prototype.listAll = function () {\r\n        validate('listAll', [], arguments);\r\n        var accumulator = {\r\n            prefixes: [],\r\n            items: []\r\n        };\r\n        return this.listAllHelper(accumulator).then(function () { return accumulator; });\r\n    };\r\n    Reference.prototype.listAllHelper = function (accumulator, pageToken) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var opt, nextPage;\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        opt = {\r\n                            // maxResults is 1000 by default.\r\n                            pageToken: pageToken\r\n                        };\r\n                        return [4 /*yield*/, this.list(opt)];\r\n                    case 1:\r\n                        nextPage = _c.sent();\r\n                        (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                        (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                        if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.listAllHelper(accumulator, nextPage.nextPageToken)];\r\n                    case 2:\r\n                        _c.sent();\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure.\r\n     * Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options See ListOptions for details.\r\n     * @return A Promise that resolves with the items and prefixes.\r\n     *      `prefixes` contains references to sub-folders and `items`\r\n     *      contains references to objects in this folder. `nextPageToken`\r\n     *      can be used to get the rest of the results.\r\n     */\r\n    Reference.prototype.list = function (options) {\r\n        validate('list', [listOptionSpec(true)], arguments);\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var op = options || {};\r\n            var requestInfo = list(self.authWrapper, self.location, \r\n            /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     *     A promise that resolves with the metadata for this object. If this\r\n     *     object doesn't exist or metadata cannot be retreived, the promise is\r\n     *     rejected.\r\n     */\r\n    Reference.prototype.getMetadata = function () {\r\n        var _this = this;\r\n        validate('getMetadata', [], arguments);\r\n        this.throwIfRoot_('getMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata The new metadata for the object.\r\n     *     Only values that have been explicitly set will be changed. Explicitly\r\n     *     setting a value to null will remove the metadata.\r\n     * @return A promise that resolves\r\n     *     with the new metadata for this object.\r\n     *     @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    Reference.prototype.updateMetadata = function (metadata) {\r\n        var _this = this;\r\n        validate('updateMetadata', [metadataSpec()], arguments);\r\n        this.throwIfRoot_('updateMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = updateMetadata(_this.authWrapper, _this.location, metadata, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * @return A promise that resolves with the download\r\n     *     URL for this object.\r\n     */\r\n    Reference.prototype.getDownloadURL = function () {\r\n        var _this = this;\r\n        validate('getDownloadURL', [], arguments);\r\n        this.throwIfRoot_('getDownloadURL');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getDownloadUrl(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper\r\n                .makeRequest(requestInfo, authToken)\r\n                .getPromise()\r\n                .then(function (url) {\r\n                if (url === null) {\r\n                    throw noDownloadURL();\r\n                }\r\n                return url;\r\n            });\r\n        });\r\n    };\r\n    Reference.prototype.throwIfRoot_ = function (name) {\r\n        if (this.location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\n\n/**\r\n * A request whose promise always fails.\r\n * @struct\r\n * @template T\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\n\nvar RequestMap = /** @class */ (function () {\r\n    function RequestMap() {\r\n        this.map = new Map();\r\n        this.id = MIN_SAFE_INTEGER;\r\n    }\r\n    /**\r\n     * Registers the given request with this map.\r\n     * The request is unregistered when it completes.\r\n     *\r\n     * @param request The request to register.\r\n     */\r\n    RequestMap.prototype.addRequest = function (request) {\r\n        var _this = this;\r\n        var id = this.id;\r\n        this.id++;\r\n        this.map.set(id, request);\r\n        request.getPromise().then(function () { return _this.map.delete(id); }, function () { return _this.map.delete(id); });\r\n    };\r\n    /**\r\n     * Cancels all registered requests.\r\n     */\r\n    RequestMap.prototype.clear = function () {\r\n        this.map.forEach(function (v) {\r\n            v && v.cancel(true);\r\n        });\r\n        this.map.clear();\r\n    };\r\n    return RequestMap;\r\n}());\n\n/**\r\n * @param app If null, getAuthToken always resolves with null.\r\n * @param service The storage service associated with this auth wrapper.\r\n *     Untyped to avoid circular type dependencies.\r\n * @struct\r\n */\r\nvar AuthWrapper = /** @class */ (function () {\r\n    function AuthWrapper(app, maker, requestMaker, service, pool) {\r\n        this.bucket_ = null;\r\n        this.deleted_ = false;\r\n        this.app_ = app;\r\n        if (this.app_ !== null) {\r\n            var options = this.app_.options;\r\n            if (isDef(options)) {\r\n                this.bucket_ = AuthWrapper.extractBucket_(options);\r\n            }\r\n        }\r\n        this.storageRefMaker_ = maker;\r\n        this.requestMaker_ = requestMaker;\r\n        this.pool_ = pool;\r\n        this.service_ = service;\r\n        this.maxOperationRetryTime_ = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this.maxUploadRetryTime_ = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this.requestMap_ = new RequestMap();\r\n    }\r\n    AuthWrapper.extractBucket_ = function (config) {\r\n        var bucketString = config[CONFIG_STORAGE_BUCKET_KEY] || null;\r\n        if (bucketString == null) {\r\n            return null;\r\n        }\r\n        var loc = Location.makeFromBucketSpec(bucketString);\r\n        return loc.bucket;\r\n    };\r\n    AuthWrapper.prototype.getAuthToken = function () {\r\n        // TODO(andysoto): remove ifDef checks after firebase-app implements stubs\r\n        // (b/28673818).\r\n        if (this.app_ !== null &&\r\n            isDef(this.app_.INTERNAL) &&\r\n            isDef(this.app_.INTERNAL.getToken)) {\r\n            return this.app_.INTERNAL.getToken().then(function (response) {\r\n                if (response !== null) {\r\n                    return response.accessToken;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }, function () { return null; });\r\n        }\r\n        else {\r\n            return Promise.resolve(null);\r\n        }\r\n    };\r\n    AuthWrapper.prototype.bucket = function () {\r\n        if (this.deleted_) {\r\n            throw appDeleted();\r\n        }\r\n        else {\r\n            return this.bucket_;\r\n        }\r\n    };\r\n    /**\r\n     * The service associated with this auth wrapper. Untyped to avoid circular\r\n     * type dependencies.\r\n     */\r\n    AuthWrapper.prototype.service = function () {\r\n        return this.service_;\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper\r\n     * at the given Location.\r\n     * @param loc The Location.\r\n     * @return Actually a firebaseStorage.Reference, typing not allowed\r\n     *     because of circular dependency problems.\r\n     */\r\n    AuthWrapper.prototype.makeStorageReference = function (loc) {\r\n        return this.storageRefMaker_(this, loc);\r\n    };\r\n    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {\r\n        if (!this.deleted_) {\r\n            var request = this.requestMaker_(requestInfo, authToken, this.pool_);\r\n            this.requestMap_.addRequest(request);\r\n            return request;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     */\r\n    AuthWrapper.prototype.deleteApp = function () {\r\n        this.deleted_ = true;\r\n        this.app_ = null;\r\n        this.requestMap_.clear();\r\n    };\r\n    AuthWrapper.prototype.maxUploadRetryTime = function () {\r\n        return this.maxUploadRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {\r\n        this.maxUploadRetryTime_ = time;\r\n    };\r\n    AuthWrapper.prototype.maxOperationRetryTime = function () {\r\n        return this.maxOperationRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {\r\n        this.maxOperationRetryTime_ = time;\r\n    };\r\n    return AuthWrapper;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, callback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n * @template T\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.setServerResponseProp(xhr.getResponseText());\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled Defaults to false.\r\n * @struct\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction makeRequest(requestInfo, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n *\r\n * @struct\r\n */\r\nvar Service = /** @class */ (function () {\r\n    function Service(app, pool, url) {\r\n        this.bucket_ = null;\r\n        function maker(authWrapper, loc) {\r\n            return new Reference(authWrapper, loc);\r\n        }\r\n        this.authWrapper_ = new AuthWrapper(app, maker, makeRequest, this, pool);\r\n        this.app_ = app;\r\n        if (url != null) {\r\n            this.bucket_ = Location.makeFromBucketSpec(url);\r\n        }\r\n        else {\r\n            var authWrapperBucket = this.authWrapper_.bucket();\r\n            if (authWrapperBucket != null) {\r\n                this.bucket_ = new Location(authWrapperBucket, '');\r\n            }\r\n        }\r\n        this.internals_ = new ServiceInternals(this);\r\n    }\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    Service.prototype.ref = function (path) {\r\n        function validator(path) {\r\n            if (typeof path !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\r\n                throw 'Expected child path but got a URL, use refFromURL instead.';\r\n            }\r\n        }\r\n        validate('ref', [stringSpec(validator, true)], arguments);\r\n        if (this.bucket_ == null) {\r\n            throw new Error('No Storage Bucket defined in Firebase Options.');\r\n        }\r\n        var ref = new Reference(this.authWrapper_, this.bucket_);\r\n        if (path != null) {\r\n            return ref.child(path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    Service.prototype.refFromURL = function (url) {\r\n        function validator(p) {\r\n            if (typeof p !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\r\n                throw 'Expected full URL but got a child path, use ref instead.';\r\n            }\r\n            try {\r\n                Location.makeFromUrl(p);\r\n            }\r\n            catch (e) {\r\n                throw 'Expected valid full URL but got an invalid one.';\r\n            }\r\n        }\r\n        validate('refFromURL', [stringSpec(validator, false)], arguments);\r\n        return new Reference(this.authWrapper_, url);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this.authWrapper_.maxUploadRetryTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Service.prototype.setMaxUploadRetryTime = function (time) {\r\n        validate('setMaxUploadRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxUploadRetryTime(time);\r\n    };\r\n    Service.prototype.setMaxOperationRetryTime = function (time) {\r\n        validate('setMaxOperationRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxOperationRetryTime(time);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\r\n        get: function () {\r\n            return this.internals_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Service;\r\n}());\r\n/**\r\n * @struct\r\n */\r\nvar ServiceInternals = /** @class */ (function () {\r\n    function ServiceInternals(service) {\r\n        this.service_ = service;\r\n    }\r\n    /**\r\n     * Called when the associated app is deleted.\r\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\r\n     */\r\n    ServiceInternals.prototype.delete = function () {\r\n        this.service_.authWrapper_.deleteApp();\r\n        return Promise.resolve();\r\n    };\r\n    return ServiceInternals;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(app, unused, url) {\r\n    return new Service(app, new XhrIoPool(), url);\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: Service,\r\n        Reference: Reference\r\n    };\r\n    instance.INTERNAL.registerService(STORAGE_TYPE, factory, namespaceExports, undefined, \r\n    // Allow multiple storage instances per app.\r\n    true);\r\n}\r\nregisterStorage(firebase);\n\nexport { registerStorage };\n//# sourceMappingURL=index.esm.js.map\n","// Styles\nimport \"../../../src/components/VTextarea/VTextarea.sass\"; // Extensions\n\nimport VTextField from '../VTextField/VTextField'; // Utilities\n\nimport mixins from '../../util/mixins';\nconst baseMixins = mixins(VTextField);\n/* @vue/component */\n\nexport default baseMixins.extend({\n  name: 'v-textarea',\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: v => !isNaN(parseFloat(v))\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: v => !isNaN(parseInt(v, 10))\n    }\n  },\n  computed: {\n    classes() {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this)\n      };\n    },\n\n    noResizeHandle() {\n      return this.noResize || this.autoGrow;\n    }\n\n  },\n  watch: {\n    lazyValue() {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight);\n    },\n\n    rowHeight() {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight);\n    }\n\n  },\n\n  mounted() {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight();\n    }, 0);\n  },\n\n  methods: {\n    calculateInputHeight() {\n      const input = this.$refs.input;\n      if (!input) return;\n      input.style.height = '0';\n      const height = input.scrollHeight;\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight); // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n\n      input.style.height = Math.max(minHeight, height) + 'px';\n    },\n\n    genInput() {\n      const input = VTextField.options.methods.genInput.call(this);\n      input.tag = 'textarea';\n      delete input.data.attrs.type;\n      input.data.attrs.rows = this.rows;\n      return input;\n    },\n\n    onInput(e) {\n      VTextField.options.methods.onInput.call(this, e);\n      this.autoGrow && this.calculateInputHeight();\n    },\n\n    onKeyDown(e) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation();\n      }\n\n      this.$emit('keydown', e);\n    }\n\n  }\n});\n//# sourceMappingURL=VTextarea.js.map","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar sloppyArrayMethod = require('../internals/sloppy-array-method');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar SLOPPY_METHOD = sloppyArrayMethod('lastIndexOf');\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = (NEGATIVE_ZERO || SLOPPY_METHOD) ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n","// Styles\nimport \"../../../src/components/VOverlay/VOverlay.sass\"; // Mixins\n\nimport Colorable from './../../mixins/colorable';\nimport Themeable from '../../mixins/themeable';\nimport Toggleable from './../../mixins/toggleable'; // Utilities\n\nimport mixins from '../../util/mixins';\n/* @vue/component */\n\nexport default mixins(Colorable, Themeable, Toggleable).extend({\n  name: 'v-overlay',\n  props: {\n    absolute: Boolean,\n    color: {\n      type: String,\n      default: '#212121'\n    },\n    dark: {\n      type: Boolean,\n      default: true\n    },\n    opacity: {\n      type: [Number, String],\n      default: 0.46\n    },\n    value: {\n      default: true\n    },\n    zIndex: {\n      type: [Number, String],\n      default: 5\n    }\n  },\n  computed: {\n    __scrim() {\n      const data = this.setBackgroundColor(this.color, {\n        staticClass: 'v-overlay__scrim',\n        style: {\n          opacity: this.computedOpacity\n        }\n      });\n      return this.$createElement('div', data);\n    },\n\n    classes() {\n      return {\n        'v-overlay--absolute': this.absolute,\n        'v-overlay--active': this.isActive,\n        ...this.themeClasses\n      };\n    },\n\n    computedOpacity() {\n      return Number(this.isActive ? this.opacity : 0);\n    },\n\n    styles() {\n      return {\n        zIndex: this.zIndex\n      };\n    }\n\n  },\n  methods: {\n    genContent() {\n      return this.$createElement('div', {\n        staticClass: 'v-overlay__content'\n      }, this.$slots.default);\n    }\n\n  },\n\n  render(h) {\n    const children = [this.__scrim];\n    if (this.isActive) children.push(this.genContent());\n    return h('div', {\n      staticClass: 'v-overlay',\n      class: this.classes,\n      style: this.styles\n    }, children);\n  }\n\n});\n//# sourceMappingURL=VOverlay.js.map","import VOverlay from './VOverlay';\nexport { VOverlay };\nexport default VOverlay;\n//# sourceMappingURL=index.js.map","// Components\nimport VOverlay from '../../components/VOverlay'; // Utilities\n\nimport { keyCodes, addOnceEventListener, addPassiveEventListener, getZIndex } from '../../util/helpers'; // Types\n\nimport Vue from 'vue';\n/* @vue/component */\n\nexport default Vue.extend().extend({\n  name: 'overlayable',\n  props: {\n    hideOverlay: Boolean,\n    overlayColor: String,\n    overlayOpacity: [Number, String]\n  },\n\n  data() {\n    return {\n      overlay: null\n    };\n  },\n\n  watch: {\n    hideOverlay(value) {\n      if (!this.isActive) return;\n      if (value) this.removeOverlay();else this.genOverlay();\n    }\n\n  },\n\n  beforeDestroy() {\n    this.removeOverlay();\n  },\n\n  methods: {\n    createOverlay() {\n      const overlay = new VOverlay({\n        propsData: {\n          absolute: this.absolute,\n          value: false,\n          color: this.overlayColor,\n          opacity: this.overlayOpacity\n        }\n      });\n      overlay.$mount();\n      const parent = this.absolute ? this.$el.parentNode : document.querySelector('[data-app]');\n      parent && parent.insertBefore(overlay.$el, parent.firstChild);\n      this.overlay = overlay;\n    },\n\n    genOverlay() {\n      this.hideScroll();\n      if (this.hideOverlay) return;\n      if (!this.overlay) this.createOverlay();\n      requestAnimationFrame(() => {\n        if (!this.overlay) return;\n\n        if (this.activeZIndex !== undefined) {\n          this.overlay.zIndex = String(this.activeZIndex - 1);\n        } else if (this.$el) {\n          this.overlay.zIndex = getZIndex(this.$el);\n        }\n\n        this.overlay.value = true;\n      });\n      return true;\n    },\n\n    /** removeOverlay(false) will not restore the scollbar afterwards */\n    removeOverlay(showScroll = true) {\n      if (this.overlay) {\n        addOnceEventListener(this.overlay.$el, 'transitionend', () => {\n          if (!this.overlay || !this.overlay.$el || !this.overlay.$el.parentNode || this.overlay.value) return;\n          this.overlay.$el.parentNode.removeChild(this.overlay.$el);\n          this.overlay.$destroy();\n          this.overlay = null;\n        });\n        this.overlay.value = false;\n      }\n\n      showScroll && this.showScroll();\n    },\n\n    scrollListener(e) {\n      if (e.type === 'keydown') {\n        if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName) || // https://github.com/vuetifyjs/vuetify/issues/4715\n        e.target.isContentEditable) return;\n        const up = [keyCodes.up, keyCodes.pageup];\n        const down = [keyCodes.down, keyCodes.pagedown];\n\n        if (up.includes(e.keyCode)) {\n          e.deltaY = -1;\n        } else if (down.includes(e.keyCode)) {\n          e.deltaY = 1;\n        } else {\n          return;\n        }\n      }\n\n      if (e.target === this.overlay || e.type !== 'keydown' && e.target === document.body || this.checkPath(e)) e.preventDefault();\n    },\n\n    hasScrollbar(el) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false;\n      const style = window.getComputedStyle(el);\n      return ['auto', 'scroll'].includes(style.overflowY) && el.scrollHeight > el.clientHeight;\n    },\n\n    shouldScroll(el, delta) {\n      if (el.scrollTop === 0 && delta < 0) return true;\n      return el.scrollTop + el.clientHeight === el.scrollHeight && delta > 0;\n    },\n\n    isInside(el, parent) {\n      if (el === parent) {\n        return true;\n      } else if (el === null || el === document.body) {\n        return false;\n      } else {\n        return this.isInside(el.parentNode, parent);\n      }\n    },\n\n    checkPath(e) {\n      const path = e.path || this.composedPath(e);\n      const delta = e.deltaY;\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        const dialog = this.$refs.dialog; // getSelection returns null in firefox in some edge cases, can be ignored\n\n        const selected = window.getSelection().anchorNode;\n\n        if (dialog && this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return this.shouldScroll(dialog, delta);\n        }\n\n        return true;\n      }\n\n      for (let index = 0; index < path.length; index++) {\n        const el = path[index];\n        if (el === document) return true;\n        if (el === document.documentElement) return true;\n        if (el === this.$refs.content) return true;\n        if (this.hasScrollbar(el)) return this.shouldScroll(el, delta);\n      }\n\n      return true;\n    },\n\n    /**\n     * Polyfill for Event.prototype.composedPath\n     */\n    composedPath(e) {\n      if (e.composedPath) return e.composedPath();\n      const path = [];\n      let el = e.target;\n\n      while (el) {\n        path.push(el);\n\n        if (el.tagName === 'HTML') {\n          path.push(document);\n          path.push(window);\n          return path;\n        }\n\n        el = el.parentElement;\n      }\n\n      return path;\n    },\n\n    hideScroll() {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement.classList.add('overflow-y-hidden');\n      } else {\n        addPassiveEventListener(window, 'wheel', this.scrollListener, {\n          passive: false\n        });\n        window.addEventListener('keydown', this.scrollListener);\n      }\n    },\n\n    showScroll() {\n      document.documentElement.classList.remove('overflow-y-hidden');\n      window.removeEventListener('wheel', this.scrollListener);\n      window.removeEventListener('keydown', this.scrollListener);\n    }\n\n  }\n});\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}