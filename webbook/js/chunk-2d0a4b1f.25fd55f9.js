(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4b1f"],{"0812":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"white",attrs:{"align-content-center":""}},[a("v-img",{attrs:{height:"300",src:t.tip.src}}),a("br"),a("div",{staticClass:"headline primary--text font-weight-black"},[t._v(t._s(t.tip.Title))]),a("div",{staticClass:"grey--text"},[a("span",{staticClass:"font-weight-bold"},[t._v("Written by:")]),t._v(" "+t._s(t.tip.Author))]),a("div",{staticClass:"grey--text"},[a("span",{staticClass:"font-weight-bold"},[t._v("Date:")]),t._v(" "+t._s(t.tip.Date))]),t.user?[t.user.uid===t.tip.authID?a("v-btn",{staticClass:"green--text text--darken-2",attrs:{text:""},on:{click:t.update}},[t._v("Edit")]):t._e(),t.user.uid===t.tip.authID?a("v-btn",{staticClass:"red--text text--darken-2",attrs:{text:""},on:{click:function(e){return t.deleteTip(t.tip.path)}}},[t._v("Delete")]):t._e(),a("br")]:t._e(),a("article",[a("p",{staticClass:"text-justify body-1",staticStyle:{"text-indent":"5%"}},[t._v(t._s(t.tip.Content))])]),a("v-dialog",{attrs:{persistent:""},model:{value:t.dialogTips,callback:function(e){t.dialogTips=e},expression:"dialogTips"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Edit Tips")])],1),a("v-form",{ref:"form",staticClass:"px-3"},[a("v-card-text",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Title*"},model:{value:t.tip.Title,callback:function(e){t.$set(t.tip,"Title",e)},expression:"tip.Title"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Content*"},model:{value:t.tip.Content,callback:function(e){t.$set(t.tip,"Content",e)},expression:"tip.Content"}})],1),a("v-btn",{staticClass:"primary",attrs:{dark:""},on:{click:t.onPickFile}},[t._v("Upload Cover Image")]),a("div",{staticClass:"red--text"},[t._v(t._s(t.imageRequired))]),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{"data-vv-as":"image",name:"image_field",type:"file",accept:"image/*"},on:{change:t.onFilePicked}}),a("v-flex",[a("img",{attrs:{height:"200",src:t.imageURL,alt:""}})])],1),a("small",[t._v("*indicates required field")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mb-3",attrs:{text:"",color:"warning darken-1"},on:{click:t.close}},[a("span",[t._v("Cancel")])]),a("v-btn",{staticClass:"mb-3 mr-2",attrs:{text:"",loading:t.loadingBtn,color:"success darken-1"},on:{click:function(e){return t.save(t.tip)}}},[a("span",[t._v("Save")])])],1)],1)],1)],1)],2)},n=[],r=(a("baa5"),a("fb6a"),a("0d03"),a("b0c0"),a("d3b7"),a("96cf"),a("dc59")),s=(a("e71f"),a("588e"),{data:function(){return{tip:[],dialogTips:!1,imageRequired:"",imageURL:"",loadingBtn:!1,imageChanged:!1}},computed:{id:function(){return this.$route.params.id},user:function(){return this.$store.state.user}},created:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(r["a"].firestore().collection("tips").doc(this.id).onSnapshot((function(e){t.tip=e.data()})));case 2:if(this.user){e.next=5;break}return e.next=5,regeneratorRuntime.awrap(this.$store.dispatch("user"));case 5:case"end":return e.stop()}}),null,this)},methods:{deleteTip:function(t){var e=this,a=confirm("Are you sure you want to delete this tip?");1==a&&r["a"].firestore().collection("tips").doc(this.id).delete().then((function(){r["a"].storage().ref().child(t).delete().then((function(){return e.$router.push("/Tips")}))}))},update:function(){this.dialogTips=!0,this.imageURL=this.tip.src},save:function(t){var e,a,i,n,s;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:if(this.image||!0!==this.imageChanged){l.next=2;break}return l.abrupt("return",this.imageRequired="*Cover image is required");case 2:if(""===t.Title||""===t.Content){l.next=25;break}return this.loadingBtn=!0,e={Title:t.Title,Author:this.user.displayName,Content:t.Content,Date:Date(Date.now())},l.prev=5,l.next=8,regeneratorRuntime.awrap(r["a"].firestore().collection("tips").doc(this.id).update(e));case 8:if(!0!==this.imageChanged){l.next=19;break}return a=this.image.name,i=a.slice(a.lastIndexOf(".")),l.next=13,regeneratorRuntime.awrap(r["a"].storage().ref().child("tips/"+this.id+i).put(this.image));case 13:return n=l.sent,l.next=16,regeneratorRuntime.awrap(r["a"].storage().ref().child(n.metadata.fullPath).getDownloadURL());case 16:return s=l.sent,l.next=19,regeneratorRuntime.awrap(r["a"].firestore().collection("tips").doc(this.id).update({src:s,path:n.metadata.fullPath}));case 19:this.close(),l.next=25;break;case 22:l.prev=22,l.t0=l["catch"](5),console.log(l.t0);case 25:case"end":return l.stop()}}),null,this,[[5,22]])},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(t){var e=this;this.imageChanged=!0;var a=t.target.files,i=a[0].name;if(i.lastIndexOf(".")<=0)return alert("Please upload a valid file");var n=new FileReader;n.addEventListener("load",(function(){e.imageURL=n.result})),n.readAsDataURL(a[0]),this.image=a[0]},close:function(){this.dialogTips=!1,this.image=null,this.imageURL="",this.loadingBtn=!1,this.imageRequired=""}}}),l=s,o=a("2877"),c=a("6544"),d=a.n(c),u=a("8336"),p=a("b0af"),h=a("99d9"),f=a("a523"),g=a("169a"),v=a("0e8f"),m=a("4bd4"),x=a("adda"),b=a("a722"),C=a("2fa4"),k=a("8654"),w=a("a844"),_=a("71d9"),T=a("2a7f"),R=Object(o["a"])(l,i,n,!1,null,null,null);e["default"]=R.exports;d()(R,{VBtn:u["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["c"],VContainer:f["a"],VDialog:g["a"],VFlex:v["a"],VForm:m["a"],VImg:x["a"],VLayout:b["a"],VSpacer:C["a"],VTextField:k["a"],VTextarea:w["a"],VToolbar:_["a"],VToolbarTitle:T["a"]})}}]);
//# sourceMappingURL=chunk-2d0a4b1f.25fd55f9.js.map