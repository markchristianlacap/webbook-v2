{"version":3,"sources":["webpack:///./src/views/Tips/View.vue?dcc1","webpack:///src/views/Tips/View.vue","webpack:///./src/views/Tips/View.vue?bde6","webpack:///./src/views/Tips/View.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","tip","src","_v","_s","Title","Author","Date","user","uid","authID","on","update","_e","$event","deleteTip","path","staticStyle","Content","model","value","callback","$$v","dialogTips","expression","ref","$set","onPickFile","imageRequired","onFilePicked","imageURL","close","loadingBtn","save","staticRenderFns","data","imageChanged","computed","id","$route","params","$store","state","methods","ans","confirm","$refs","fileInput","click","filename","lastIndexOf","alert","fileReader","addEventListener","readAsDataURL","files","image","component","VBtn","VCard","VCardActions","VCardText","VContainer","VDialog","VFlex","VForm","VImg","VLayout","VSpacer","VTextField","VTextarea","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/chunk-2d0a4b1f.25fd55f9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"white\",attrs:{\"align-content-center\":\"\"}},[_c('v-img',{attrs:{\"height\":\"300\",\"src\":_vm.tip.src}}),_c('br'),_c('div',{staticClass:\"headline primary--text font-weight-black\"},[_vm._v(_vm._s(_vm.tip.Title))]),_c('div',{staticClass:\"grey--text\"},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"Written by:\")]),_vm._v(\" \"+_vm._s(_vm.tip.Author))]),_c('div',{staticClass:\"grey--text\"},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"Date:\")]),_vm._v(\" \"+_vm._s(_vm.tip.Date))]),(_vm.user)?[(_vm.user.uid === _vm.tip.authID)?_c('v-btn',{staticClass:\"green--text text--darken-2\",attrs:{\"text\":\"\"},on:{\"click\":_vm.update}},[_vm._v(\"Edit\")]):_vm._e(),(_vm.user.uid === _vm.tip.authID)?_c('v-btn',{staticClass:\"red--text text--darken-2\",attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.deleteTip(_vm.tip.path)}}},[_vm._v(\"Delete\")]):_vm._e(),_c('br')]:_vm._e(),_c('article',[_c('p',{staticClass:\"text-justify body-1\",staticStyle:{\"text-indent\":\"5%\"}},[_vm._v(_vm._s(_vm.tip.Content))])]),_c('v-dialog',{attrs:{\"persistent\":\"\"},model:{value:(_vm.dialogTips),callback:function ($$v) {_vm.dialogTips=$$v},expression:\"dialogTips\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_c('v-toolbar-title',[_vm._v(\"Edit Tips\")])],1),_c('v-form',{ref:\"form\",staticClass:\"px-3\"},[_c('v-card-text',[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Title*\"},model:{value:(_vm.tip.Title),callback:function ($$v) {_vm.$set(_vm.tip, \"Title\", $$v)},expression:\"tip.Title\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-textarea',{attrs:{\"label\":\"Content*\"},model:{value:(_vm.tip.Content),callback:function ($$v) {_vm.$set(_vm.tip, \"Content\", $$v)},expression:\"tip.Content\"}})],1),_c('v-btn',{staticClass:\"primary\",attrs:{\"dark\":\"\"},on:{\"click\":_vm.onPickFile}},[_vm._v(\"Upload Cover Image\")]),_c('div',{staticClass:\"red--text\"},[_vm._v(_vm._s(_vm.imageRequired))]),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"data-vv-as\":\"image\",\"name\":\"image_field\",\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onFilePicked}}),_c('v-flex',[_c('img',{attrs:{\"height\":\"200\",\"src\":_vm.imageURL,\"alt\":\"\"}})])],1),_c('small',[_vm._v(\"*indicates required field\")])],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{staticClass:\"mb-3\",attrs:{\"text\":\"\",\"color\":\"warning darken-1\"},on:{\"click\":_vm.close}},[_c('span',[_vm._v(\"Cancel\")])]),_c('v-btn',{staticClass:\"mb-3 mr-2\",attrs:{\"text\":\"\",\"loading\":_vm.loadingBtn,\"color\":\"success darken-1\"},on:{\"click\":function($event){return _vm.save(_vm.tip)}}},[_c('span',[_vm._v(\"Save\")])])],1)],1)],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container align-content-center class=\"white\">\r\n    <v-img class=\"\" height=\"300\" :src=\"tip.src\"></v-img>\r\n    <br />\r\n    <div class=\"headline primary--text font-weight-black\">{{ tip.Title }}</div>\r\n    <div class=\"grey--text\"><span class=\"font-weight-bold\">Written by:</span> {{ tip.Author }}</div>\r\n    <div class=\"grey--text\"><span class=\"font-weight-bold\">Date:</span> {{ tip.Date }}</div>\r\n    <template v-if=\"user\">\r\n      <v-btn v-if=\"user.uid === tip.authID\" text class=\"green--text text--darken-2\" @click=\"update\">Edit</v-btn>\r\n      <v-btn v-if=\"user.uid === tip.authID\" text class=\"red--text text--darken-2\" @click=\"deleteTip(tip.path)\">Delete</v-btn>\r\n      <br />\r\n    </template>\r\n    <article>\r\n      <p class=\"text-justify body-1\" style=\"text-indent:5%\">{{ tip.Content }}</p>\r\n    </article>\r\n\r\n    <!-- Edit Tips Dialog -->\r\n    <v-dialog v-model=\"dialogTips\" persistent>\r\n      <v-card>\r\n        <v-toolbar dark color=\"primary\">\r\n          <v-toolbar-title>Edit Tips</v-toolbar-title>\r\n        </v-toolbar>\r\n        <v-form ref=\"form\" class=\"px-3\">\r\n          <v-card-text>\r\n            <v-layout wrap>\r\n              <v-flex xs12>\r\n                <v-text-field v-model=\"tip.Title\" label=\"Title*\"></v-text-field>\r\n              </v-flex>\r\n              <v-flex xs12>\r\n                <v-textarea v-model=\"tip.Content\" label=\"Content*\"></v-textarea>\r\n              </v-flex>\r\n              <v-btn class=\"primary\" dark @click=\"onPickFile\">Upload Cover Image</v-btn>\r\n              <div class=\"red--text\">{{ imageRequired }}</div>\r\n              <input ref=\"fileInput\" style=\"display:none\" data-vv-as=\"image\" name=\"image_field\" type=\"file\" accept=\"image/*\" @change=\"onFilePicked\" />\r\n              <v-flex>\r\n                <img height=\"200\" :src=\"imageURL\" alt=\"\" />\r\n              </v-flex>\r\n            </v-layout>\r\n            <small>*indicates required field</small>\r\n          </v-card-text>\r\n          <v-card-actions>\r\n            <v-spacer></v-spacer>\r\n            <v-btn text class=\"mb-3\" color=\"warning darken-1\" @click=\"close\">\r\n              <span>Cancel</span>\r\n            </v-btn>\r\n            <v-btn text :loading=\"loadingBtn\" class=\"mb-3 mr-2\" color=\"success darken-1\" @click=\"save(tip)\">\r\n              <span>Save</span>\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-form>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport fb from \"@/firebase\"\r\nimport \"firebase/firestore\"\r\nimport \"firebase/storage\"\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      tip: [],\r\n      dialogTips: false,\r\n      imageRequired: \"\",\r\n      imageURL: \"\",\r\n      loadingBtn: false,\r\n      imageChanged: false\r\n    }\r\n  },\r\n  computed: {\r\n    id() {\r\n      return this.$route.params.id\r\n    },\r\n    user() {\r\n      return this.$store.state.user\r\n    }\r\n  },\r\n  async created() {\r\n    await fb\r\n      .firestore()\r\n      .collection(\"tips\")\r\n      .doc(this.id)\r\n      .onSnapshot(doc => {\r\n        this.tip = doc.data()\r\n      })\r\n    if (!this.user) await this.$store.dispatch(\"user\")\r\n  },\r\n  methods: {\r\n    deleteTip(path) {\r\n      var ans = confirm(\"Are you sure you want to delete this tip?\")\r\n      if (ans == true) {\r\n        fb.firestore()\r\n          .collection(\"tips\")\r\n          .doc(this.id)\r\n          .delete()\r\n          .then(() => {\r\n            fb.storage()\r\n              .ref()\r\n              .child(path)\r\n              .delete()\r\n              .then(() => {\r\n                return this.$router.push(\"/Tips\")\r\n              })\r\n          })\r\n      }\r\n    },\r\n    update() {\r\n      this.dialogTips = true\r\n      this.imageURL = this.tip.src\r\n    },\r\n    async save(tip) {\r\n      if (!this.image && this.imageChanged === true) {\r\n        return (this.imageRequired = \"*Cover image is required\")\r\n      }\r\n      if (tip.Title !== \"\" && tip.Content !== \"\") {\r\n        this.loadingBtn = true\r\n        const inputTip = {\r\n          Title: tip.Title,\r\n          Author: this.user.displayName,\r\n          Content: tip.Content,\r\n          Date: Date(Date.now())\r\n        }\r\n        try {\r\n          await fb\r\n            .firestore()\r\n            .collection(\"tips\")\r\n            .doc(this.id)\r\n            .update(inputTip)\r\n          if (this.imageChanged === true) {\r\n            const filename = this.image.name\r\n            const ext = filename.slice(filename.lastIndexOf(\".\"))\r\n            const filedata = await fb\r\n              .storage()\r\n              .ref()\r\n              .child(\"tips/\" + this.id + ext)\r\n              .put(this.image)\r\n            const url = await fb\r\n              .storage()\r\n              .ref()\r\n              .child(filedata.metadata.fullPath)\r\n              .getDownloadURL()\r\n            await fb\r\n              .firestore()\r\n              .collection(\"tips\")\r\n              .doc(this.id)\r\n              .update({ src: url, path: filedata.metadata.fullPath })\r\n          }\r\n          this.close()\r\n        } catch (e) {\r\n          console.log(e)\r\n        }\r\n      }\r\n    },\r\n    onPickFile() {\r\n      this.$refs.fileInput.click()\r\n    },\r\n    onFilePicked(event) {\r\n      this.imageChanged = true\r\n      const files = event.target.files\r\n      let filename = files[0].name\r\n      if (filename.lastIndexOf(\".\") <= 0) {\r\n        return alert(\"Please upload a valid file\")\r\n      }\r\n      const fileReader = new FileReader()\r\n      fileReader.addEventListener(\"load\", () => {\r\n        this.imageURL = fileReader.result\r\n      })\r\n      fileReader.readAsDataURL(files[0])\r\n      this.image = files[0]\r\n    },\r\n    close() {\r\n      this.dialogTips = false\r\n      this.image = null\r\n      this.imageURL = \"\"\r\n      this.loadingBtn = false\r\n      this.imageRequired = \"\"\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./View.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--17-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./View.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./View.vue?vue&type=template&id=33ca954a&\"\nimport script from \"./View.vue?vue&type=script&lang=js&\"\nexport * from \"./View.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VContainer,VDialog,VFlex,VForm,VImg,VLayout,VSpacer,VTextField,VTextarea,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}